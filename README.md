# Цветочный магазин "Роза"

Веб-приложение для цветочного магазина, разработанное на Django.

## Функциональность

### Для пользователей:
- **Регистрация и авторизация** с валидацией полей
- **Каталог товаров** с фильтрацией по категориям и сортировкой
- **Детальная страница товара** с характеристиками
- **Корзина покупок** с возможностью изменения количества
- **Оформление заказа** с подтверждением паролем
- **Личный кабинет** с историей заказов
- **Страница контактов** с информацией о магазине

### Для администратора:
- **Управление товарами** (добавление, редактирование, удаление)
- **Управление категориями** товаров
- **Просмотр и управление заказами** (подтверждение, отмена)
- **Управление слайдером** на главной странице
- **Управление контактной информацией**

## Технологии

- **Backend**: Django 4.2.7
- **Frontend**: HTML5, CSS3, JavaScript, Bootstrap 5
- **База данных**: SQLite
- **Дополнительные библиотеки**:
  - Pillow (работа с изображениями)
  - django-crispy-forms (стилизация форм)
  - crispy-bootstrap5 (Bootstrap стили для форм)
  - django-widget-tweaks (настройка виджетов форм)

## Установка и запуск

1. **Клонируйте репозиторий**:
   ```bash
   git clone <repository-url>
   cd project
   ```

2. **Установите зависимости**:
   ```bash
   pip install -r requirements.txt
   ```

3. **Примените миграции**:
   ```bash
   python manage.py migrate
   ```

4. **Заполните базу данных тестовыми данными**:
   ```bash
   python manage.py populate_db
   ```

5. **Запустите сервер разработки**:
   ```bash
   python manage.py runserver
   ```

6. **Откройте браузер** и перейдите по адресу `http://127.0.0.1:8000/`

## Доступ к админ-панели

- URL: `http://127.0.0.1:8000/admin/`
- Логин: `admin`
- Пароль: `admin123`

## Структура проекта

```
project/
├── flower_shop/          # Основные настройки Django
├── main/                 # Главное приложение (товары, категории, контакты)
├── user_auth/           # Аутентификация пользователей
├── orders/              # Заказы и корзина
├── templates/           # HTML шаблоны
├── static/              # Статические файлы (CSS, JS, изображения)
├── media/               # Загружаемые файлы (изображения товаров)
└── requirements.txt     # Зависимости Python
```

## Модели данных

### User (CustomUser)
- Расширенная модель пользователя с полями:
  - Имя, фамилия, отчество (с валидацией кириллицы)
  - Логин (с валидацией латиницы, цифр и тире)
  - Email (уникальный)

### Product
- Товар с полями:
  - Название, описание, цена
  - Изображение, категория
  - Страна-производитель, год выпуска, модель
  - Количество на складе, статус наличия

### Category
- Категория товаров

### Order
- Заказ с полями:
  - Пользователь, статус, дата создания
  - Причина отмены (если заказ отменен)

### OrderItem
- Элемент заказа с полями:
  - Заказ, товар, количество, цена

### Cart
- Корзина покупок с полями:
  - Пользователь, товар, количество

## Валидация форм

### Регистрация:
- **Имя/Фамилия**: только кириллица, пробел и тире
- **Отчество**: необязательное, только кириллица, пробел и тире
- **Логин**: только латиница, цифры и тире, уникальный
- **Email**: валидный email, уникальный
- **Пароль**: минимум 6 символов
- **Повтор пароля**: должен совпадать с паролем
- **Согласие с правилами**: обязательно

### Авторизация:
- **Логин**: обязательное поле
- **Пароль**: обязательное поле

## API Endpoints

- `/` - Главная страница
- `/catalog/` - Каталог товаров
- `/product/<id>/` - Страница товара
- `/contacts/` - Контакты
- `/auth/register/` - Регистрация
- `/auth/login/` - Авторизация
- `/auth/logout/` - Выход
- `/auth/profile/` - Личный кабинет
- `/orders/cart/` - Корзина
- `/orders/checkout/` - Оформление заказа
- `/admin/` - Админ-панель

## Особенности реализации

1. **AJAX формы** - регистрация и авторизация без перезагрузки страницы
2. **Валидация на клиенте и сервере** - двойная проверка данных
3. **Адаптивный дизайн** - работает на всех устройствах
4. **Корзина в сессии** - товары сохраняются между сессиями
5. **Управление складом** - автоматическое уменьшение количества при заказе
6. **Статусы заказов** - новый, подтвержден, отменен
7. **Причины отмены** - администратор может указать причину отмены заказа

## Лицензия

Этот проект создан в учебных целях.
